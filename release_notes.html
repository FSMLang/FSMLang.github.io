<html>
<head>
<title>FSMLang Release Notes</title>
<link rel="stylesheet" href="fsmlangweb.css"/>
</head>

<h1>FSMLang Release Notes</h1>

<body>
<table class="release_notes">

<tr>
	<th>Revision 1.34</th>
	<td>
		<p>added new option <b>--short-debug-names</b> to generate machine debug info without name prefix.
		</p>
   
		<p>Contributed by maintainer Daniel Jasinsky
		</p>
*
	</td>
</tr>

<tr>
	<th>Revision 1.33</th>
	<td>
		<p>Fixed bug in PlantUML generation which resulted in malformed
      transitions when shared events are involved.
		</p>
 
		<p>Added "numAllEvents" macro to the top level event enumeration.
		</p>
	</td>
</tr>

<tr>
	<th>Revision 1.32</th>
	<td>
		<p>The macro EVENT_IS_NOT_EXCLUDED_FROM_LOG(e) can be used to exclude
   events from the main loop debug log.
		</p>
	</td>
</tr>

<tr>
	<th>Revision 1.31</th>
	<td>
    DECLARE_%s_MACHINE macro now correctly formed.
	</td>
</tr>

<tr>
	<th>Revision 1.30</th>
	<td>
    DECLARE_%s_MACHINE macro now correctly formed.
	</td>
</tr>

<tr>
	<th>Revision 1.29</th>
	<td>
      <p>Declare data translation functions in switch machines.</p>
      <p>Allow states to declare that sub-machines are to be inhibited therein.</p>
      <p>Put the current event into the FSM struct; this should not be used to make
      decisions (that's what the machine itself is for!), but for refined
      error reporting (or the like) in actions.</p>
	</td>
</tr>

<tr>
	<th>Revision 1.28</th>
	<td>
   EOLs which crept back into DBG_PRINTFs removed.
	</td>
</tr>

<tr>
	<th>Revision 1.27</th>
	<td>
  <p>
   Sub-machines can designate events as being shared from the parent machine.  Moreover, these events
    can designate data translation functions.  Code is generated to call the sub-machine whenever the parent experiences the event.  Any data translation function is called before the sub-machine is called.
    </p> 
    <p>
   A <i>native impl(ementation)?</i> block can be defined in the machine qualifier section, analogous to the native block preceding the machine, the <i>native
     implementation</i> block is copied into the source file, rather than the header.
    </p>
	</td>
</tr>

<tr>
	<th>Revision 1.26</th>
	<td>
		RUN_STATE_MACHINE and DECLARE_xxx_MACHINE comply with MISRA C:2012:20.7
	</td>
</tr>

<tr>
	<th>Revision 1.25</th>
	<td>
		<p>The event-state table now scrolls when needed.
		</p>
		<p>--css-content-internal=true with -th option copies css content into the html file.  The default is to reference the styleshet externally.
		</p>

		<p>--css-content-filename=&lt;filename&gt; with -th option uses the indicated file for css content.
		</p>
	</td>
</tr>

<tr>
	<th>Revision 1.24</th>
	<td>
		<p>-tp option produces PlantUML output.</p>
		<p>--include-svg-img=true with -th option adds html image tag before event-state table.  The <i>src</i>
		attribute of the tag is set to [filename].svg.  The <i>alt</i> attribute is used to point out that
		the image must be generated separately.</p>
	</td>
</tr>

<tr>
	<th>Revision 1.23</th>
	<td>
		<p>enum typedefs C++ compliant.</p>
		<p>Sub-machine typedefs and declarations precede data block declaration.</p>
	</td>
</tr>

<tr>
	<th>Revision 1.22</th>
	<td><p>FSM_REVISION macro set the numeric fsm revision string now available.</p>
 
	</td>
</tr>

<tr>
	<th>Revision 1.21</th>
	<td><p>Sub-machines no longer have their own event enumerations; rather, all machines use one enumeration created at
   the top level.  This resolves warnings generated by armcc.  Convenience macros are provided for referencing
   the right enumeration.
	 </p>
 
   <p>Sub-machines no longer generate unnecessary state transition function declarations.
   </p>
	</td>
</tr>

<tr>
	<th>Revision 1.20</th>
	<td>--core-logging-only=true suppresses the generation of debug logging outside of the core fsm function.
	</td>
</tr>

<tr>
   <th>Revision 1.19</th>
   <td>--generate-weak-fns=false suppresses the generation of weak function stubs.
   </td>
</tr>

<tr>
   <th>Revision 1.18</th>
   <td>findAndRunSubMachine not declared when no sub-machines are present.
   </td>
</tr>

<tr>
   <th>Revision 1.17</th>
   <td>Data initialization is mediated through a macro.
   </td>
</tr>

<tr>
   <th>Revision 1.16</th>
   <td>C Switch Machines now generate any sub-machines.
   </td>
</tr>

<tr>
   <th>Revision 1.15</th>
   <td>Compact table generation correctly references states and state transition functions.
   </td>
</tr>

<tr>
   <th>Revision 1.14</th>
   <td>returns statements with multiple entries can now end with a namespace event reference.
   </td>
</tr>

<tr>
   <th>Revision 1.13</th>
   <td>RUN_STATE_MACHINE and DECLARE_%s_MACHINE now enclose parameters in parentheses. 
   </td>
</tr>

<tr>
   <th>Revision 1.12</th>
   <td>"Action returns" statements can now reference sub-machine events 
   and "parent" events.
   </td>
</tr>

<tr>
   <th>Revision 1.11</th>
   <td>Remove line-endings from generated DBG_PRINTF statements.
   </td>
</tr>

<tr>
   <th>Revision 1.10</th>
   <td>Create weakly linked stubs for all user functions.  Cygwin
   seems to have trouble with this.  It works for Mingwsa. Have
   not tested Linux.
   </td>
</tr>

<tr>
   <th>Revision 1.9</th>
   <td>Removed the concept of an "active" sub state machine; all sub-machines can
   run based on the event given to the top level machine.
   </td>
</tr>

<tr>
   <th>Revision 1.8</th>
    <td>introduces Hierarchical state machines.
   </td>
</tr>

<tr>
   <th>Revision 1.7</th>
   <td>
			<ul>
      <li>introduces the concept of transition functions to machines having actions which return states.</li>
      <li>extends the -c option to machines having actions which return void.  This required no code changes.</li>
      <li>introduces a new machine qualifier: 'on transition ID;' where ID names a function which will be called</li>
        whenever the state changes.  The function takes a pointer to the machine, and the value of the new state.</li>
   </td>
</tr>

<tr>
   <th>Revision 1.6</th>
   <td>adds a new command line option, -c, which will create a more compact event/state table.  The option is
   currently only meaningful when -tc is used with machines having actions which return events.
 
   <p>Compaction is achieved by creating a table of pointers to the action functions along with an enum to index it.  This enum
   and the state enum are used to create the event/state table basic type; and, the enums are declared with the packed
   attribute.  Thus, for machines having less than 256 actions and states, the size of the basic event/state table type struct
   is only 2 bytes.
   </p>
 
   <p>When transition functions are used, a similar table/enum pair is constructed.
   </p>
   </td>
</tr>

<tr>
   <th>Revision 1.5</th>
   <td>adds a new output type modifier, 's'.  Specifying -ts will create a machine in which each state is
      handled by a function, which switches on the event to execute the appropriate action function and select the
      next state.  This type of machine uses no memory, as there is no event/state table; the machine is
      purely code.
 
      <p>Also, the "actions return states" machine is fixed.
      </p>
   </td>
</tr>

<tr>
   <th>Revision 1.4</th>
   <td>adds two new functions:
      <ul>
      <li>transitions may now be done through functions, rather than designated states.  As with actions, these
        are not previously declared; they are simply stated.  The function arguments are first a pointer to the
        machine, followed by the event causing the transition.
        </li>
      <li>both actions and transitions may be given return declarations.  These are in the form of "name returns ...;"
        where "name" is a previously seen action or transition function name.  Presently, this information is used
        only to enhance the HTML page.
        </li>
      </ul>
   </td>
</tr>

<tr>
   <th>Revision 1.3</th>
   <td>quiets a warning about  the shadowing of a global variable by a local variable; the warning
   was correct, but the shadowing was not consequential.  In the spirit of "no warnings are the only good warnings"....
   </td>
</tr>

<tr>
   <th>Revision 1.2</th>
   <td>adds a new option: "-i0" will inhibit the creation of an instance of the machine.
   Any other argument to -i, or not having -i0 will cause the creation of an instance, which is
   the historical behavior.
   </td>
</tr>

<tr> 
  <th>Revision 1.1</th>
  <td> separates the action/transition array from the machine structure.  Two
  benefits proceed from this: first, the array can be made constant; and second, the machine
  structure can now be instantiated multiple times.  A macro is provided by which machines may
  be easily declared.
  </td>
</tr> 

</tr>

</table>
</body>
</html>
