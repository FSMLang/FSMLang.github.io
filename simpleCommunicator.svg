<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="459px" preserveAspectRatio="none" style="width:900px;height:459px;" version="1.1" viewBox="0 0 900 459" width="900px" zoomAndPan="magnify"><defs><filter height="300%" id="f1htrsnylibj9b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FEFECE" filter="url(#f1htrsnylibj9b)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="253.23" y="89"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="253.23" x2="303.23" y1="115.2969" y2="115.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="263.23" y="106.9951">IDLE</text><rect fill="#FEFECE" filter="url(#f1htrsnylibj9b)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="217.23" y="368"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="217.23" x2="339.23" y1="394.2969" y2="394.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="227.23" y="385.9951">AWAITING_ACK</text><ellipse cx="278.23" cy="18" fill="#000000" filter="url(#f1htrsnylibj9b)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><!--link *start to IDLE--><path d="M278.23,28.01 C278.23,40.7 278.23,64.41 278.23,83.57 " fill="none" id="*start-IDLE" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="278.23,88.84,282.23,79.84,278.23,83.84,274.23,79.84,278.23,88.84" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IDLE to AWAITING_ACK--><path d="M252.86,116.66 C195.72,121 59.77,134.76 32.23,169 C-4.26,214.37 -0.95,252.16 32.23,300 C72.41,357.92 153.76,379.43 211.91,387.39 " fill="none" id="IDLE-AWAITING_ACK" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="217.11,388.08,208.7137,382.932,212.1534,387.4229,207.6624,390.8626,217.11,388.08" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="176.23" y="182.0669">Event:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="226.23" y="182.0669">SEND_MESSAGE</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="183.73" y="197.1997">Action:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="238.73" y="197.1997">sendMessage</text><path d="M37.23,206.2656 L37.23,291.2656 L469.23,291.2656 L469.23,216.2656 L459.23,206.2656 L37.23,206.2656 " fill="#FBFB77" filter="url(#f1htrsnylibj9b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M459.23,206.2656 L459.23,216.2656 L469.23,216.2656 L459.23,206.2656 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="47.23" y="223.3325"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="411" x="43.23" y="238.4653">Since we're idle, we can simply send the message.  Transitioning</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="394" x="43.23" y="253.5981">to the AWAITING_ACK state ensures that any other messages</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="43.23" y="268.731">we're asked to send will be queued.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="47.23" y="283.8638"/><!--link AWAITING_ACK to IDLE--><path d="M339.38,382.59 C387.29,371.66 450.92,348.46 482.23,300 C513.82,251.09 517.74,215.14 482.23,169 C461.11,141.56 359.98,125.2 308.49,118.52 " fill="none" id="AWAITING_ACK-IDLE" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="303.37,117.87,311.7808,122.9942,308.3285,118.513,312.8097,115.0607,303.37,117.87" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="664.23" y="189.5669">Event:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="714.23" y="189.5669">ACK</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="635.23" y="204.6997">Action:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="690.23" y="204.6997">checkQueue</text><path d="M512.23,213.7656 L512.23,283.7656 L888.23,283.7656 L888.23,223.7656 L878.23,213.7656 L512.23,213.7656 " fill="#FBFB77" filter="url(#f1htrsnylibj9b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M878.23,213.7656 L878.23,223.7656 L888.23,223.7656 L878.23,213.7656 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="522.23" y="230.8325"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="351" x="518.23" y="245.9653">We've received our ACK for the previous message.  It is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="518.23" y="261.0981">time to check for any others.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="522.23" y="276.231"/><!--link AWAITING_ACK to AWAITING_ACK--><path d="M313.68,367.9 C343.29,357.17 374.23,365.54 374.23,393 C374.23,418.96 346.58,427.86 318.54,419.69 " fill="none" id="AWAITING_ACK-AWAITING_ACK" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="313.68,418.1,321.007,424.6814,318.4361,419.6425,323.475,417.0717,313.68,418.1" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="489.73" y="348.0669">Event:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="539.73" y="348.0669">SEND_MESSAGE</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="492.73" y="363.1997">Action:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="547.73" y="363.1997">queueMessage</text><path d="M379.23,377.2656 L379.23,447.2656 L754.23,447.2656 L754.23,387.2656 L744.23,377.2656 L379.23,377.2656 " fill="#FBFB77" filter="url(#f1htrsnylibj9b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M744.23,377.2656 L744.23,387.2656 L754.23,387.2656 L744.23,377.2656 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="389.23" y="394.3325"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="354" x="385.23" y="409.4653">Since we're busy, we must queue the message for later</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="385.23" y="424.5981">sending.  The queue will be checked when the ACK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="385.23" y="439.731">is received.</text><!--
@startuml
state IDLE
state AWAITING_ACK

[*] - -> IDLE
IDLE - -> AWAITING_ACK : **Event:** SEND_MESSAGE\n**Action:** sendMessage
note on link

    Since we're idle, we can simply send the message.  Transitioning
    to the AWAITING_ACK state ensures that any other messages
    we're asked to send will be queued.
  
end note
AWAITING_ACK - -> IDLE : **Event:** ACK\n**Action:** checkQueue
note on link

    We've received our ACK for the previous message.  It is 
    time to check for any others.
  
end note
AWAITING_ACK - -> AWAITING_ACK : **Event:** SEND_MESSAGE\n**Action:** queueMessage

note on link

    Since we're busy, we must queue the message for later
    sending.  The queue will be checked when the ACK
    is received.
  end note
@enduml

PlantUML version 1.2018.13(Mon Nov 26 12:11:51 EST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.19+7-post-Ubuntu-0ubuntu120.04.1
Operating System: Linux
OS Version: 5.15.90.1-microsoft-standard-WSL2
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>