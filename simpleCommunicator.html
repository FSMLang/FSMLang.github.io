<!DOCTYPE html>
<html>
<!--
	simpleCommunicator.html

	This file automatically generated by FSMLang

-->
<head>
<title>FSM Lang : simpleCommunicator</title>
<script>window.name="FSMLang-simpleCommunicator"</script>
<link REL=stylesheet type="text/css" href="fsmlang.css">
</head><body>
<h2>simpleCommunicator</h2>
<p>
   This machine manages communications using a "stop and wait" protocol.
      Only one message is allowed to be outstanding.
</p>
<img src="simpleCommunicator.svg" alt="PlantUML diagram separately generated."/>
<div class="scrollable">
<table class="machine">
	<thead>
		<tr>
			<th class="blankCorner">&nbsp;</th>
			<th class=eventName>SEND_MESSAGE</th>
			<th class=eventName>ACK</th>
		</tr>
	</thead>
	<tbody>
		<tr>
		<th class=stateName>IDLE</th>
		<td class=action>sendMessage<br/>returns:
	<ul class="return_decl">
		<li>noEvent</li>
	</ul>
<br/><b>transition</b> : AWAITING_ACK<p class="transition_comment">
    Since we're idle, we can simply send the message.  Transitioning
    to the AWAITING_ACK state ensures that any other messages
    we're asked to send will be queued.
  </p></td>
		<td class=nullAction>&nbsp;<br/><b>transition</b> : none</td>
	</tr>
	<tr>
		<th class=stateName>AWAITING_ACK</th>
		<td class=action>queueMessage<br/>returns:
	<ul class="return_decl">
		<li>noEvent</li>
	</ul>
<br/><b>transition</b> : none<p class="transition_comment">
    Since we're busy, we must queue the message for later
    sending.  The queue will be checked when the ACK
    is received.
  </p></td>
		<td class=action>checkQueue<br/>returns:
	<ul class="return_decl">
		<li>SEND_MESSAGE</li>
		<li>noEvent</li>
	</ul>
<br/><b>transition</b> : IDLE<p class="transition_comment">
    We've received our ACK for the previous message.  It is 
    time to check for any others.
  </p></td>
	</tr>
	</tbody>
</table>
</div>
<table class="elements">
<tr>
<th colspan=2 align=left>Events</th>
</tr>
<tr>
<td class="label">SEND_MESSAGE</td>
<td>&nbsp;
</td>
</tr>
<tr>
<td class="label">ACK</td>
<td>&nbsp;
</td>
</tr>
</table>
<table class="elements">
<tr>
<th colspan=2 align=left>States</th>
</tr>
<tr>
<td class="label">IDLE</td>
<td>
&nbsp;</td></tr>
<tr>
<td class="label">AWAITING_ACK</td>
<td>
&nbsp;</td></tr>
</table>
<table class="elements">
<tr>
<th colspan=2 align=left>Actions</th>
</tr>
<tr>
<td class="label">sendMessage</td>
<td>
 sendMessage sends a message from the queue.  The
      message is expected to be there, since
      checkQueue will have been previously called.
  
<br/><br/>Returns:<ul class="return_decl">		<li>noEvent</li>
</ul>
</td>
</tr>
<tr>
<td class="label">queueMessage</td>
<td>
 queueMessage adds a message to the queue 
<br/><br/>Returns:<ul class="return_decl">		<li>noEvent</li>
</ul>
</td>
</tr>
<tr>
<td class="label">checkQueue</td>
<td>
 checkQueue only checks; it does not dequeue; that
      is done by sendMessage.

      Return SEND_MESSAGE when the queue is not empty.
  
<br/><br/>Returns:<ul class="return_decl">		<li>SEND_MESSAGE</li>
		<li>noEvent</li>
</ul>
</td>
</tr>
</table>
</body>
</html>
